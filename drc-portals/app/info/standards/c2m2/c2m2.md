### Introduction
The Crosscut Metadata Model (C2M2) is a flexible metadata standard for 
describing experimental resources in biomedicine and related fields. A complete 
C2M2 submission, also called an "instance" or a "datapackage", is a zipped folder 
containing multiple tab-delimited files (TSVs) representing metadata records along 
with a JSON schema. 

Each TSV file is a **data table** containing various **data records** (rows) and 
their values for different **fields** (columns). **Entity tables** describe 
various types of data objects, while **association tables** describe the relationships 
between different entities. 

### Tutorials and Examples
For the April 2022 CFDE Cross-Pollination meeting, the LINCS DCC demonstrated a Jupyter Notebook tutorial on building the `file`, `biosample`, and `subject` tables for LINCS L1000 signature data. The code and files can be found at the following link: 

[LINCS C2M2 Demo (04-05-2022 Cross-Pollination)](https://github.com/nih-cfde/LINCS-metadata/tree/main/scripts/April-CrossPollination-Demo)

### General Steps
The C2M2 datapackage building process will vary across DCCs, depending on the 
types of generated data, ontologies, and access standards in place. In general, 
however, the process will be as follows: 

1. Become familiar with the current structure of the C2M2, including the required fields 
across the entity and association tables, and download the JSON schema. 
2. Identify all relevant projects and their associated files that will be included 
in the C2M2 datapackage. Additionally, identify the relevant namespace for all files. 
3. Determine the relationships between files and their associated samples or biological 
subjects, as well as all relevant assay types, analysis methods, data types, file 
formats, etc. 
  - For instance, if `File A1` is a `count matrix` generated via `RNA-seq profiling` of `kidney sample 1` from `Subject A`, all of this information can be stored in the C2M2 format.
4. Identify all appropriate ontological mappings, if any, corresponding to each 
value from above. 
  - For instance, `RNA-seq profiling` would most likely be represented by `OBI:0001271 RNA-seq assay`. 
5. Either manually or programmatically, generate each data table, starting with the 
core entity tables (`file`, `biosample`, `subject`). 
  - In our example, `File A1` would be a row in `file`, `kidney sample 1` would be a row in `biosample`, and `Subject A` would be a row in `sample`. 
6. Generate the inter-entity linkage association tables (`file_describes_biosample`, 
`file_describes_subject`, `biosample_from_subject`). 
  - In our example, we would at minimum generate a row linking `File A1` to `kidney sample 1` in the first table, `File A1` to `Subject A` in the second, and `kidney sample 1` to `Subject A` in the third. 
7. If applicable, generate container entity tables (`project`, `collection`) that 
describe logic, theme, or funding-based groups of the core entities. Note that 
projects and collections may be nested, in the `project_in_project` and 
`collection_in_collection` tables. 
6. Assign files, biosamples, and subjects to any projects or collections using the 
`file_in_collection`, `subject_in_collection`, and `biosample_in_collection` tables, 
as well as the `project_local_id` field within each of the entity tables. 
7. Use provided C2M2 submission preparation script and ontology support files to 
automatically build term entity tables from your created files. 
8. Validate the final datapackage, containing all files and the schema, and submit! 

### Core Entity Tables
The basic experimental resources within the C2M2 are `file`, `biosample`, and 
`subject`. Each of these tables share a set of common metadata fields: 

- `id_namespace`: URI-prefix identifier 
- `local_id`: URi-suffix identifier 
- `persistent_id`: file_Resolvable URI permanently attached to an entity (e.g. download link or landing page)
- `creation_time`: Timestampe of entity creation/observation in YYYY-MM-DDTHH:MM:SSÂ±NN:NN format
- `project_id_namespace`: URI-prefix identifier of overarching project for which the entity was created
- `project_local_id`: URI-suffix identifier of overarching project for which the entity was created

Additionally, each table has separate unique metadata fields:

**File:** A stable digital asset
- `size_in_bytes`: Filesize in bytes
- `uncompressed_size_in_bytes`: Fileize in bytes when decompressed
- `sha256`: SHA-256 checksum of the file
- `md5`: MD5 checksum of the file
- `filename`: Name of file with no path prefixes
- `file_format`: EDAM ID for the digital format of the file
- `compression_format`: EDAM ID for the compression method of the file, if applicable
- `data_type`: EDAM ID for data stored in the file
- `assay_type`: OBI ID for type of experiment performed to generate the file
- `analysis_type`: OBI ID for any analytic operation performed on file
- `mime_type`: [MIME](https://www.iana.org/assignments/media-types/media-types.xhtml) type describing this file

**Biosample:** A tissue sample or physical specimen
- `sample_prep_method`: OBI ID for sample preparation method 
- `anatomy`: UBERON ID for tissue origin of sample, if applicable

**Subject:** A biological entity from which a biosample can be generated
- `granularity`: One of multiple [classes](https://osf.io/gpf3d) of biosample sources
- `sex`: Biological sex of subject, if applicable
- `ethnicity`: Self-reported ethnicity of subject, if applicable
- `age_at_enrollment`: Age of subject at enrollment time in primary project, if applicable