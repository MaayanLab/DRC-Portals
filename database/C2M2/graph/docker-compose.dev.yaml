services:
  neo4j:
    image: neo4j:5.22.0-community-bullseye
    container_name: drc-portals-neo4j-dev
    restart: unless-stopped
    ports:
      - 7474:7474
      - 7687:7687
    volumes:
      - ./data:/data
      - ./logs:/logs
      - ./plugins:/plugins
      - ./backups:/backups
    environment:
      - USERNAME
      - PASSWORD
      - DB_ADDRESS
      - NEO4J_AUTH
      - GRAPH_C2M2_DBNAME
      - GRAPH_C2M2_READER_USERNAME
      - GRAPH_C2M2_READER_PASSWORD
      - NEO4J_ACCEPT_LICENSE_AGREEMENT=yes
      - NEO4J_dbms_cypher_lenient__create__relationship=true
      - NEO4J_db_transaction_timeout=30s
      - NEO4J_db_lock_acquisition_timeout=30s
      - NEO4J_db_memory_transaction_max=25mB
      - NEO4J_PLUGINS=["apoc"]
